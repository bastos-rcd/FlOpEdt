(function(){"use strict";var e={5940:function(e,t,a){a(1703);let o="";const n=document.getElementById("json_data");if(n&&n.textContent){const e=JSON.parse(n.textContent);"api"in e&&(o=e.api)}function i(e){if(!document.cookie)return null;const t=document.cookie.split(";").map((e=>e.trim())).filter((t=>t.startsWith(e+"=")));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}const l=i("csrftoken");async function r(e,t){const a=t;t=Object.assign({method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin"},t),t.headers=Object.assign({"X-CSRFToken":l,"Content-Type":"application/json"},t.headers);let n="";a&&(n=Object.keys(a).map((e=>e+"="+a[e])).join("&"));const i=`${o}${e}/?${n}`;console.log(`Fetching ${i}...`);const r=await fetch(i,t),s=await r.json()||{};if(!r.ok){const e=s.error||`${r.status}`;throw new Error(e)}return s}async function s(e,t,a){if(!["PUT","POST","DELETE","PATCH"].includes(e))return Promise.reject("Method must be either PUT, POST, PATCH, or DELETE");const n=new Headers;n.set("Content-Type","application/json"),l&&n.set("X-CSRFToken",l);const i={method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:n,redirect:"follow",referrerPolicy:"same-origin"};a.data&&(i.body=JSON.stringify(a.data));let r="/";a.id&&(r=`/${a.id}/`);const s=`${o}${t}${r}`;return console.log(`Updating ${s}...`),await fetch(s,i).then((async e=>{const t=await e.json();if(!e.ok){const a=t||`Error ${e.status}: ${e.statusText}`;return Promise.reject(a)}return t})).catch((e=>Promise.reject(e)))}async function u(e,t,a){const o={id:t,data:a};return await s("PUT",e,o)}async function c(e,t){const a={data:t};return await s("POST",e,a)}async function d(e,t,a){const o={id:t,data:a};return await s("PATCH",e,o)}function v(e,t){const a={id:t};return s("DELETE",e,a)}const m={departments:"fetch/alldepts",rooms:"rooms/room",weekdays:"fetch/weekdays",timesettings:"base/timesettings",roomreservation:"roomreservations/reservation",roomreservationtype:"roomreservations/reservationtype",reservationperiodicity:"roomreservations/reservationperiodicity",reservationperiodicitytype:"roomreservations/reservationperiodicitytype",reservationperiodicitybyweek:"roomreservations/reservationperiodicitybyweek",reservationperiodicityeachmonthsamedate:"roomreservations/reservationperiodicityeachmonthsamedate",reservationperiodicitybymonth:"roomreservations/reservationperiodicitybymonth",reservationperiodicitybymonthxchoice:"roomreservations/reservationperiodicitybymonthxchoice",courses:"courses/courses",scheduledcourses:"fetch/scheduledcourses",coursetypes:"courses/type",users:"user/users",booleanroomattributes:"rooms/booleanattributes",numericroomattributes:"rooms/numericattributes",booleanroomattributevalues:"rooms/booleanattributevalues",numericroomattributevalues:"rooms/numericattributevalues"},p=(e,t,a)=>r(e,t?f(t,a):{});function y(e,t){return`${e}/${t}`}const b={fetch:{booleanRoomAttributes(){return p(m.booleanroomattributes)},booleanRoomAttributeValues(){return p(m.booleanroomattributevalues)},courses(e){return p(m.courses,e,[["department","dept"]])},courseTypes(e){return p(m.coursetypes,e,[["department","dept"]])},departments(){return p(m.departments)},numericRoomAttributes(){return p(m.numericroomattributes)},numericRoomAttributeValues(){return p(m.numericroomattributevalues)},reservationPeriodicities(){return p(m.reservationperiodicity)},reservationPeriodicity(e){return p(m.reservationperiodicity,{id:e})},reservationPeriodicityByMonthXChoices(){return p(m.reservationperiodicitybymonthxchoice)},reservationPeriodicityTypes(){return p(m.reservationperiodicitytype)},room(e,t){return p(y(m.rooms,e.toString()),t)},rooms(e){return p(m.rooms,e,[["department","dept"]])},roomReservations(e){return p(m.roomreservation,e,[["roomId","room"],["periodicityId","periodicity"]])},roomReservationTypes(){return p(m.roomreservationtype)},scheduledCourses(e){return p(m.scheduledcourses,e,[["department","dept"]])},timeSettings(){return p(m.timesettings)},users(){return p(m.users)},weekdays(e){return p(m.weekdays,e)}},put:{roomReservation(e){return u(m.roomreservation,e.id,e)},reservationPeriodicityByMonth(e){return u(m.reservationperiodicitybymonth,e.id,e)},reservationPeriodicityByWeek(e){return u(m.reservationperiodicitybyweek,e.id,e)},reservationPeriodicityEachMonthSameDate(e){return u(m.reservationperiodicityeachmonthsamedate,e.id,e)}},post:{roomReservation(e){return c(m.roomreservation,e)},reservationPeriodicityByMonth(e){return c(m.reservationperiodicitybymonth,e)},reservationPeriodicityByWeek(e){return c(m.reservationperiodicitybyweek,e)},reservationPeriodicityEachMonthSameDate(e){return c(m.reservationperiodicityeachmonthsamedate,e)}},patch:{reservationPeriodicityByMonth(e,t){return d(m.reservationperiodicitybymonth,e,t)},reservationPeriodicityByWeek(e,t){return d(m.reservationperiodicitybyweek,e,t)},reservationPeriodicityEachMonthSameDate(e,t){return d(m.reservationperiodicityeachmonthsamedate,e,t)}},delete:{reservationPeriodicity(e){return v(m.reservationperiodicity,e)},roomReservation(e){return v(m.roomreservation,e)}}};function f(e,t){let a=Object.entries(e).filter((e=>e[1]));return t&&(a=a.map((e=>{const a=t.find((t=>t[0]===e[0])),o=a?a[1]:e[0];return[o,e[1]]}))),Object.fromEntries(a)}var h=a(821);const w=Symbol("currentWeekKey"),_=Symbol("api");function g(e,t){const a=(0,h.f3)(e,t);if(!a)throw new Error(`${e.toString()} was not provided.`);return a}var k=a(1595),D=(a(7658),a(2482));class S{constructor(e,t){(0,D.Z)(this,"value",void 0),(0,D.Z)(this,"text",void 0),this.value=e,this.text=t}}function x(e){const t=Math.trunc(e),a=Math.round(60*(e-t));return`${t}:${C(a)}`}function C(e){if("string"===typeof e&&(e=parseInt(e,10),isNaN(e)))throw new Error(`Given value (${e}) cannot not be parsed as number`);return`${e<10?`0${e}`:e}`}function T(e,t){if(e instanceof Object&&!(e instanceof Error)){const a=e;Object.keys(a).forEach((e=>{t?.("danger",`${e}: ${a[e]}`)}))}else t?.("danger",`${e}.`)}function H(e,t){const a={};return e.forEach((e=>{const o=t(e);o in a||(a[o]=[]),a[o].push(e)})),a}function M(e){const t=x(e/60);return new S(e,t)}function U(e){return e.map((e=>e.id))}const j={name:"BaseCalendar",components:{}};var F=(0,h.aZ)({...j,setup(e,{expose:t}){const a=(0,h.iH)({}),o=(0,h.iH)("");function n(e,t){a.value[e]=t}function i(e){l(),a.value[e].openContextMenu()&&(o.value=e)}function l(){o.value&&a.value[o.value].closeContextMenu()}function r(){l()}return t({openContextMenu:i,closeCurrentContextMenu:l,storeSlotInterface:n}),(e,t)=>((0,h.wg)(),(0,h.iD)("div",{onClick:r},[(0,h.WI)(e.$slots,"table")]))}});const P=F;var O=P;const $={class:"p-0 flex-nowrap"},E=(0,h._)("th",{class:"p-0 me-3"},null,-1),R={class:"p-0 h-100",style:{"min-width":"50px",width:"50px"}},I={class:"text-wrap"},B=(0,h._)("hr",{class:"border border-primary border-1 w-100 position-absolute top-0",style:{transform:"translateY(-3px)"}},null,-1),W=["onMousedown","onMouseup"],A={name:"HourCalendar",components:{}};var Y=(0,h.aZ)({...A,props:{values:null},emits:["drag"],setup(e,{emit:t}){const a=e,o=15,n=30,i=(0,h.Fl)((()=>{const e={};return Object.keys(a.values.slots).forEach((t=>{t in e||(e[t]=[]),e[t]=a.values.slots[t].filter((e=>_(e.slotData)))})),e})),l=(0,h.Fl)((()=>{const e=Math.trunc(a.values.startTime/60),t=Math.trunc(a.values.endTime/60),o=[];for(let a=e;a<=t;++a){const e={value:60*a,text:x(a)};o.push(e)}return o})),r={startDate:new Date,startTime:{text:"",value:0},endDate:new Date,endTime:{text:"",value:0}};let s=!1;function u(e,t){return Math.round((a.values.startTime+e/m*60)/t)*t}function c(e,t){const n=e.split("/");r.startDate=new Date(`${a.values.year}-${n[1]}-${n[0]}`);const i=u(t.offsetY,o);r.startTime={text:x(i/60),value:i},s=!0}function d(e,o){if(!s)return;s=!1;const i=e.split("/");r.endDate=new Date(`${a.values.year}-${i[1]}-${i[0]}`);const l=r.startTime.value;let c=u(o.offsetY,n);const d=c-l<0;if(!d&&c-l<5&&(c=l+60),c=Math.min(l+Math.round((c-l)/n)*n,a.values.endTime),r.endTime={text:x(c/60),value:c},d){const e=r.endDate,t=r.endTime;r.endDate=r.startDate,r.endTime=r.startTime,r.startTime=t,r.startDate=e}t("drag",r)}function v(e){s&&d(`${r.startDate.getDate()}/${r.startDate.getMonth()+1}`,e)}const m=50,p=(0,h.Fl)((()=>m*(Math.trunc(a.values.endTime/60)-Math.trunc(a.values.startTime/60)))),y=(0,h.Fl)((()=>`${p.value}px`));function b(e){return 100*(e-a.values.startTime)/(a.values.endTime-a.values.startTime)}function f(e){const t=b(e.startTime.value),a=b(e.endTime.value),o=a-t;return`${o}%`}function w(e){const t=b(e);return`${t}%`}function _(e){const t=e.startTime.value>=a.values.startTime;return t||console.log(`Slot ${e.title} cannot be displayed because it does not begin after day start time`),t}function g(e){const t=w(e.startTime.value),a=f(e);return{height:a,top:t,position:"absolute","text-align":"center"}}function k(e){const t=w(e.value);return{top:t,position:"absolute",width:"100%"}}const D=(0,h.iH)();function S(e){D.value&&D.value.openContextMenu(e)}function C(e,t){D.value&&D.value.storeSlotInterface(e,t)}return(e,t)=>((0,h.wg)(),(0,h.j4)(O,{ref_key:"calendar",ref:D},{table:(0,h.w5)((()=>[(0,h._)("table",{class:"w-100",onMouseleave:v},[(0,h._)("tr",$,[E,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("th",{key:e.date,class:(0,h.C_)(["col text-center border-dark border-bottom border-end border-top",{"border-start border-dark":e===a.values.days[0]}])},[(0,h._)("div",null,(0,h.zw)(e.name)+" "+(0,h.zw)(e.date),1)],2)))),128))]),(0,h._)("tr",{class:"flex-nowrap position-relative",style:(0,h.j5)({height:(0,h.SU)(y)})},[(0,h._)("td",R,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(l),(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.value,style:(0,h.j5)(k(e)),class:"translate-middle-y"},[(0,h._)("h6",I,(0,h.zw)(e.text),1),B],4)))),128))]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("td",{key:e.date,class:(0,h.C_)(["col border-dark border-bottom border-end p-0",{"border-start border-dark":e===a.values.days[0]}]),style:(0,h.j5)([{height:(0,h.SU)(y)},{"min-width":"65px"}])},[(0,h._)("div",{class:"position-relative h-100",onMousedown:(0,h.iM)((t=>c(e.date,t)),["left","self"]),onMouseup:(0,h.iM)((t=>d(e.date,t)),["left","self"])},[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(i)[e.date],(e=>((0,h.wg)(),(0,h.j4)((0,h.LL)(e.component.value),{key:e.slotData.id,data:e.slotData,actions:e.actions,style:(0,h.j5)(g(e.slotData)),class:"noselect slot m-0 border border-dark",onContextmenu:[t[0]||(t[0]=(0,h.iM)((()=>{}),["right","prevent"])),t=>S(e.slotData.id)],onInterface:C},null,40,["data","actions","style","onContextmenu"])))),128))],40,W)],6)))),128))],4)],32)])),_:1},512))}});const L=Y;var Z=L,z=a(2791);const V={class:"row"},N={name:"WeekPicker",components:{}};var q=(0,h.aZ)({...N,props:{week:null,year:null},emits:["update:week","update:year"],setup(e,{emit:t}){const a=(0,h.iH)([]);(0,h.m0)((()=>{const e=a.value[0];if(!e)return;const o=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-o.getTime())/864e5);t("update:week",Math.ceil(n/7)),t("update:year",e.getFullYear())}));const o=(0,h.iH)("fr"),n=(0,h.iH)("Aujourd'hui");return(e,t)=>((0,h.wg)(),(0,h.iD)("div",V,[(0,h.Wm)((0,h.SU)(z.Z),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),locale:o.value,inline:"","week-numbers":"","week-picker":"","enable-time-picker":!1,"auto-apply":"","show-now-button":"","now-button-label":n.value},null,8,["modelValue","locale","now-button-label"])]))}});const K=q;var X=K;const J={class:"w-100"},G=(0,h._)("th",{class:"col text-center border-dark border"},"Room",-1),Q={class:"h-100"},ee=["onClick"],te=["onClick"],ae={key:0},oe={name:"RoomCalendar",components:{}};var ne=(0,h.aZ)({...oe,props:{values:null},emits:["newSlot","rowHeaderClick"],setup(e,{emit:t}){const a=e;function o(e,o){const n=e.split("/");t("newSlot",new Date(`${a.values.year}-${n[1]}-${n[0]}`),`${o}`)}const n=(0,h.iH)();function i(e){n.value&&n.value.openContextMenu(e)}function l(e,t){n.value&&n.value.storeSlotInterface(e,t)}return(e,t)=>((0,h.wg)(),(0,h.j4)(O,{ref_key:"calendar",ref:n},{table:(0,h.w5)((()=>[(0,h._)("table",J,[(0,h._)("tr",null,[G,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("th",{key:e.date,class:"col text-center border-dark border"},(0,h.zw)(e.name)+" "+(0,h.zw)(e.date),1)))),128))]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.rooms,(n=>((0,h.wg)(),(0,h.iD)("tr",{key:n.id,class:"border-dark border align-top h-100"},[(0,h._)("td",Q,[(0,h._)("button",{type:"button",class:"btn btn-outline-dark h-100 w-100 align-middle rounded-0",onClick:t=>e.$emit("rowHeaderClick",n.id)},(0,h.zw)(n.name),9,ee)]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.days,(e=>((0,h.wg)(),(0,h.iD)("td",{key:e.date,class:"border-dark border pb-3",onClick:(0,h.iM)((t=>o(e.date,n.id)),["self","left"])},[e.date in a.values.slots&&n.id in a.values.slots[e.date]?((0,h.wg)(),(0,h.iD)("div",ae,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.values.slots[e.date][n.id],(e=>((0,h.wg)(),(0,h.j4)((0,h.LL)(e.component.value),{key:e.slotData.id,data:e.slotData,actions:e.actions,class:"col noselect slot m-0 border border-dark",onContextmenu:[t[0]||(t[0]=(0,h.iM)((()=>{}),["right","prevent"])),t=>i(e.slotData.id)],onInterface:l},null,40,["data","actions","onContextmenu"])))),128))])):(0,h.kq)("",!0)],8,te)))),128))])))),128))])])),_:1},512))}});const ie=ne;var le=ie;const re={class:"card p-0 m-0"},se={class:"card-body p-1 m-0"},ue={class:"btn-group",role:"group","aria-label":"Slot context menu"},ce={name:"CalendarSlotContextMenu",components:{}};var de=(0,h.aZ)({...ce,props:{onEdit:null,onDelete:null,onDuplicate:null},setup(e){const t=e;return(e,a)=>((0,h.wg)(),(0,h.iD)("div",re,[(0,h._)("div",se,[(0,h._)("div",ue,[(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>t.onEdit&&t.onEdit(...e))},"Edit"),(0,h._)("button",{type:"button",class:"btn btn-danger",onClick:a[1]||(a[1]=(...e)=>t.onDelete&&t.onDelete(...e))},"Delete"),(0,h._)("button",{type:"button",class:"btn btn-info",onClick:a[2]||(a[2]=(...e)=>t.onDuplicate&&t.onDuplicate(...e))},"Duplicate")])])]))}});const ve=de;var me=ve;const pe={name:"DayPicker",components:{}};var ye=(0,h.aZ)({...pe,props:{startDate:null,clearable:{type:Boolean},shouldReset:{type:Boolean},minDate:null},emits:["update:date","update:week","update:year","onReset"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return new Date(a.startDate)},set(e){const a=e;if(!a)return 1;const o=new Date(a.getFullYear(),0,1),n=Math.floor((a.getTime()-o.getTime())/864e5),i=C(a.getDate()),l=C(a.getMonth()+1),r=a.getFullYear();t("update:date",`${r}-${l}-${i}`),t("update:week",Math.ceil(n/7)),t("update:year",r)}});(0,h.YP)((()=>a.shouldReset),(e=>{e&&(o.value=new Date(a.startDate),t("onReset"))}));const n=(0,h.iH)("fr"),i=(0,h.iH)("Aujourd'hui");return(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(z.Z),{modelValue:(0,h.SU)(o),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),locale:n.value,"text-input":"",format:"dd/MM/yyyy","week-numbers":"","enable-time-picker":!1,"auto-apply":"","show-now-button":"","now-button-label":i.value,transitions:!1,"min-date":a.minDate,clearable:a.clearable},{"dp-input":(0,h.w5)((({value:t})=>[(0,h.WI)(e.$slots,"input",{value:t})])),_:3},8,["modelValue","locale","now-button-label","min-date","clearable"]))}});const be=ye;var fe=be,he=a(8877);const we={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},_e={class:"modal-content"},ge={class:"modal-header"},ke={id:"modalTitleLabel",class:"modal-title"},De={class:"modal-body"},Se={class:"sticky-top"},xe=(0,h._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Ce={class:"modal-footer"},Te=["onClick","disabled"],He=["onClick","disabled"],Me={name:"ModalForm",components:{}};var Ue=(0,h.aZ)({...Me,props:{isOpen:{type:Boolean},isLocked:{type:Boolean},onCancel:null,onSave:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(),n=(0,h.iH)(!1),i=(0,h.iH)([]);function l(){if(!n.value)return;const e=he.u_.getOrCreateInstance(o.value);e&&e.show()}function r(){a.onCancel()}function s(){c("info","Sending data, please wait..."),a.onSave()}function u(){if(!n.value)return;const e=he.u_.getOrCreateInstance(o.value);e&&(d(),e.hide())}function c(e,t){i.value.push({level:e,message:t})}function d(){i.value=[]}return(0,h.YP)((()=>a.isOpen),(e=>{e?l():u()})),(0,h.bv)((()=>{n.value=!0,t("interface",{close:u,addAlert:c,dismissAlerts:d})})),(t,n)=>((0,h.wg)(),(0,h.iD)("div",{ref_key:"modalRef",ref:o,class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"modalTitleLabel","aria-hidden":"true"},[(0,h._)("div",we,[(0,h._)("div",_e,[(0,h._)("div",ge,[(0,h._)("h5",ke,[(0,h.WI)(t.$slots,"title")]),a.isLocked?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("button",{key:0,type:"button",class:"btn-close","aria-label":"Close",onClick:n[0]||(n[0]=(0,h.iM)(((...t)=>e.onCancel&&e.onCancel(...t)),["stop"]))}))]),(0,h._)("div",De,[(0,h._)("div",Se,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(i.value,(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.message,class:(0,h.C_)([`alert-${e.level}`,"alert alert-dismissible fade show"]),role:"alert"},[(0,h.Uk)((0,h.zw)(e.message)+" ",1),xe],2)))),128))]),(0,h.WI)(t.$slots,"body")]),(0,h._)("div",Ce,[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(r,["stop"]),disabled:a.isLocked}," Cancel ",8,Te),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(s,["stop"]),disabled:a.isLocked}," Save ",8,He)])])])],512))}});const je=Ue;var Fe=je;const Pe={name:"TimePicker",components:{}};var Oe=(0,h.aZ)({...Pe,props:{hours:null,minutes:null,shouldReset:{type:Boolean}},emits:["updateTime","onReset"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return{hours:a.hours,minutes:a.minutes}},set(e){t("updateTime",{hours:e.hours,minutes:e.minutes})}});return(0,h.YP)((()=>a.shouldReset),(e=>{e&&(o.value={hours:a.hours,minutes:a.minutes},t("onReset"))})),(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(z.Z),{modelValue:(0,h.SU)(o),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),"time-picker":"",transitions:!1,clearable:!1},{"dp-input":(0,h.w5)((({value:t})=>[(0,h.WI)(e.$slots,"input",{value:t})])),_:3},8,["modelValue"]))}});const $e=Oe;var Ee=$e;const Re={class:"mb-2"},Ie=["id","value","disabled"],Be=["for"],We={key:0,class:"text-danger"},Ae={class:"form-floating"},Ye=["disabled"],Le=(0,h._)("label",{for:"input-weeks-interval",class:"form-label"},"Week interval",-1),Ze={name:"PeriodicityByWeekEdit",components:{}};var ze=(0,h.aZ)({...Ze,props:{weekdays:null,model:null,isDisabled:{type:Boolean}},emits:["update:model"],setup(e,{emit:t}){const a=e,o=(0,h.iH)({id:a.model.id,start:a.model.start,end:a.model.end,periodicity_type:a.model.periodicity_type,bw_weeks_interval:a.model.bw_weeks_interval,bw_weekdays:a.model.bw_weekdays}),n=(0,h.Fl)({get(){return o.value.bw_weekdays},set(e){o.value.bw_weekdays=e,r()}}),i=(0,h.Fl)({get(){return o.value.bw_weeks_interval},set(e){o.value.bw_weeks_interval=e,r()}}),l=(0,h.Fl)((()=>0===n.value.length?"border border-danger rounded":""));function r(){t("update:model",o.value)}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h._)("div",Re,[(0,h._)("div",{class:(0,h.C_)((0,h.SU)(l))},[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.weekdays,(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.num,class:"form-check form-check-inline"},[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox",id:`checkbox-weekday-${e.num}`,value:e.ref,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(n)?n.value=e:null),disabled:a.isDisabled},null,8,Ie),[[h.e8,(0,h.SU)(n)]]),(0,h._)("label",{class:"form-check-label",for:`checkbox-weekday-${e.num}`},(0,h.zw)(e.name),9,Be)])))),128))],2),0===(0,h.SU)(n).length?((0,h.wg)(),(0,h.iD)("span",We,"* Required")):(0,h.kq)("",!0)]),(0,h._)("div",Ae,[(0,h.wy)((0,h._)("input",{type:"number",class:"form-control",id:"input-weeks-interval","onUpdate:modelValue":t[1]||(t[1]=e=>(0,h.dq)(i)?i.value=e:null),min:"1",disabled:a.isDisabled},null,8,Ye),[[h.nr,(0,h.SU)(i)]]),Le])]))}});const Ve=ze;var Ne=Ve;const qe={class:"input-group mb-3"},Ke=(0,h._)("span",{class:"input-group-text"},"Repeat each",-1),Xe=["disabled"],Je=(0,h._)("option",{value:void 0,disabled:""},"Select an occurrence number",-1),Ge=["value"],Qe=["disabled"],et=(0,h._)("option",{value:"",disabled:""},"Select a day",-1),tt=["value"],at=(0,h._)("span",{class:"input-group-text"},"of each month",-1),ot={name:"PeriodicityByMonthEdit",components:{}};var nt=(0,h.aZ)({...ot,props:{weekdays:null,model:null,isDisabled:{type:Boolean}},emits:["update:model"],setup(e,{emit:t}){const a=e,o=g(_),n=(0,h.iH)([]),i=(0,h.iH)({id:a.model.id,start:a.model.start,end:a.model.end,periodicity_type:a.model.periodicity_type,bm_day_choice:a.model.bm_day_choice,bm_x_choice:a.model.bm_x_choice}),l=(0,h.Fl)({get(){return a.model.bm_day_choice},set(e){i.value.bm_day_choice=e,s()}}),r=(0,h.Fl)({get(){return a.model.bm_x_choice},set(e){i.value.bm_x_choice=e,s()}});function s(){t("update:model",i.value)}const u=(0,h.Fl)((()=>l.value?"":"border border-danger"));return(0,h.bv)((()=>{o.fetch.reservationPeriodicityByMonthXChoices().then((e=>n.value=e))})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h._)("div",qe,[Ke,(0,h.wy)((0,h._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(r)?r.value=e:null),class:(0,h.C_)(["form-select",(0,h.SU)(u)]),"aria-label":"Select occurrence number",disabled:a.isDisabled},[Je,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(n.value,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e[0],value:e[0]},(0,h.zw)(e[1]),9,Ge)))),128))],10,Xe),[[h.bM,(0,h.SU)(r)]]),(0,h.wy)((0,h._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>(0,h.dq)(l)?l.value=e:null),class:"form-select","aria-label":"Select a day",disabled:a.isDisabled},[et,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.weekdays,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.num,value:e.ref},(0,h.zw)(e.name),9,tt)))),128))],8,Qe),[[h.bM,(0,h.SU)(l)]]),at])]))}});const it=nt;var lt=it;const rt=["disabled"],st=(0,h._)("option",{value:void 0,disabled:""},"Select a periodicity type",-1),ut=["value"],ct={name:"PeriodicitySelect",components:{}};var dt=(0,h.aZ)({...ct,props:{types:null,weekdays:null,modelType:null,modelPeriodicity:null,isDisabled:{type:Boolean}},emits:["update:modelPeriodicity","update:modelType"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return a.modelType},set(e){t("update:modelType",e)}}),n=(0,h.iH)(a.modelPeriodicity);(0,h.YP)((()=>a.modelPeriodicity),(e=>{Object.values(n.value).forEach((t=>{t.start=e.BW.start,t.end=e.BW.end}))}));const i=(0,h.Fl)({get(){return n.value.BW},set(e){n.value.BW=e,t("update:modelPeriodicity",n.value)}}),l=(0,h.Fl)({get(){return n.value.BM},set(e){n.value.BM=e,t("update:modelPeriodicity",n.value)}});return(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h.wy)((0,h._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),class:"form-select mb-2","aria-label":"Select periodicity type",disabled:a.isDisabled},[st,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.types,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e[0],value:e},(0,h.zw)(e[1]),9,ut)))),128))],8,rt),[[h.bM,(0,h.SU)(o)]]),(0,h.SU)(o)&&"BW"===(0,h.SU)(o)[0]?((0,h.wg)(),(0,h.j4)(Ne,{key:0,weekdays:a.weekdays,"is-disabled":a.isDisabled,model:(0,h.SU)(i),"onUpdate:model":t[1]||(t[1]=e=>(0,h.dq)(i)?i.value=e:null)},null,8,["weekdays","is-disabled","model"])):(0,h.kq)("",!0),(0,h.SU)(o)&&"BM"===(0,h.SU)(o)[0]?((0,h.wg)(),(0,h.j4)(lt,{key:1,weekdays:a.weekdays,"is-disabled":a.isDisabled,model:(0,h.SU)(l),"onUpdate:model":t[2]||(t[2]=e=>(0,h.dq)(l)?l.value=e:null)},null,8,["weekdays","is-disabled","model"])):(0,h.kq)("",!0)]))}});const vt=dt;var mt=vt;const pt={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},yt={class:"modal-content"},bt={class:"modal-header"},ft={id:"modalTitleLabel",class:"modal-title"},ht={class:"modal-body"},wt={class:"modal-footer"},_t=["onClick","disabled"],gt=["onClick","disabled"],kt={key:0},Dt=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),St=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),xt=[Dt,St],Ct={key:1},Tt={name:"ModalDialog",components:{}};var Ht=(0,h.aZ)({...Tt,props:{isOpen:{type:Boolean},isLocked:{type:Boolean},onCancel:null,onConfirm:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(!1),n=(0,h.iH)();function i(){a.onCancel?.()}function l(){a.onConfirm?.()}function r(){if(!o.value)return;const e=he.u_.getOrCreateInstance(n.value);e&&e.show()}function s(){if(!o.value)return;const e=he.u_.getOrCreateInstance(n.value);e&&e.hide()}return(0,h.YP)((()=>a.isOpen),(e=>{e?r():s()})),(0,h.bv)((()=>{o.value=!0,t("interface",{close:s})})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",{ref_key:"modalRef",ref:n,class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"modalTitleLabel","aria-hidden":"true"},[(0,h._)("div",pt,[(0,h._)("div",yt,[(0,h._)("div",bt,[(0,h._)("h5",ft,[(0,h.WI)(e.$slots,"title")])]),(0,h._)("div",ht,[(0,h.WI)(e.$slots,"body")]),(0,h._)("div",wt,[(0,h.WI)(e.$slots,"buttons",{},(()=>[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(i,["stop"]),disabled:a.isLocked}," Cancel ",8,_t),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(l,["stop"]),disabled:a.isLocked},[a.isLocked?((0,h.wg)(),(0,h.iD)("span",kt,xt)):((0,h.wg)(),(0,h.iD)("span",Ct,"Confirm"))],8,gt)]))])])])],512))}});const Mt=Ht;var Ut=Mt;const jt=(0,h._)("span",null," You are about to remove a repetition. Doing so will cause the next reservations to be lost forever and unlink all previous reservations from this repetition.",-1),Ft=(0,h._)("br",null,null,-1),Pt=(0,h._)("span",null,[(0,h._)("b",null,"Are you sure to remove the repetition?")],-1),Ot=(0,h._)("span",null," You are about to save changes to a periodic reservation. Would you like to apply the changes to the future reservations too?",-1),$t=(0,h._)("br",null,null,-1),Et=(0,h._)("span",null,[(0,h._)("b",null,"Applying the changes will overwrite previous values.")],-1),Rt=["onClick"],It=["onClick"],Bt={key:0},Wt=(0,h._)("span",null,"You will not be able to reserve the following dates:",-1),At={key:1},Yt=(0,h._)("span",null,"This reservation is not possible.",-1),Lt=[Yt],Zt=(0,h._)("br",null,null,-1),zt={key:2},Vt=(0,h._)("span",null,[(0,h.Uk)("The following reservations can be made, "),(0,h._)("b",null,"do you want to create them?")],-1),Nt={class:"text-start mb-2"},qt={key:0},Kt=["onClick"],Xt=["onClick"],Jt={key:1},Gt=["onClick"],Qt={class:"form-floating mb-3"},ea=["id"],ta=["for"],aa={class:"form-floating mb-3"},oa=["id"],na=["for"],ia={class:"form-floating mb-3"},la=["id"],ra=(0,h._)("option",{value:"-1",disabled:""},"Select a room",-1),sa=["value"],ua=["for"],ca={class:"mb-3"},da={class:"form-floating"},va=["id","value"],ma=["for"],pa={class:"row m-0 gx-1 mb-3"},ya={class:"row m-0 gx-1 mb-2"},ba={class:"form-check form-switch"},fa=["id"],ha=["for"],wa={key:0,class:"row m-0 gx-1"},_a={class:"col",style:{"min-width":"100px"}},ga={class:"form-floating"},ka=["id","value"],Da=["for"],Sa={class:"col",style:{"min-width":"100px"}},xa={class:"form-floating"},Ca=["id","value"],Ta=["for"],Ha={class:"form-floating mb-3"},Ma=["id","value"],Ua=["for"],ja={class:"form-floating mb-3"},Fa=["id"],Pa=(0,h._)("option",{value:-1,disabled:""},"Select a reservation type",-1),Oa=["value"],$a=["for"],Ea={key:0,class:"mb-3"},Ra={key:1,class:"mb-3 border rounded p-2"},Ia={class:"row mb-2 gx-1"},Ba={class:"col"},Wa={class:"form-floating"},Aa=["id","value","disabled"],Ya=["for"],La={class:"form-check form-switch mb-3"},Za=["id"],za=["for"],Va={name:"RoomReservationForm",components:{}};var Na=(0,h.aZ)({...Va,props:{reservation:null,isOpen:{type:Boolean},isNew:{type:Boolean},rooms:null,reservationTypes:null,users:null,periodicityTypes:null,weekdays:null,onPeriodicityDelete:null,dayStart:null,dayEnd:null},emits:["saved","closed","cancelled"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(),n=g(_);class i{constructor(){(0,D.Z)(this,"hours",0),(0,D.Z)(this,"minutes",0)}static fromString(e){const t=e.split(":"),a=new i;return a.hours=parseInt(t[0]),a.minutes=parseInt(t[1]),a}static fromTime(e){const t=new i;return t.hours=Math.trunc(e.value/60),t.minutes=e.value-60*t.hours,t}}(0,D.Z)(i,"toString",(e=>`${e.hours}:${e.minutes}:00`));const l=(0,h.iH)(!1),r=(0,h.iH)(!1),s=(0,h.iH)(!1),u=(0,h.iH)(!1),c=(0,h.Fl)((()=>{const e=a.users[a.reservation.responsible];return e?`${e.first_name} ${e.last_name} (${e.username})`:"Unknown"})),d=(0,h.iH)(),v=(0,h.iH)(!1),m=(0,h.iH)(a.isOpen);(0,h.YP)((()=>a.isOpen),(e=>{m.value=e}));const p=(0,h.iH)(!1),y=(0,h.iH)(!1),b=(0,h.iH)(!1),f=(0,h.iH)(!1),w=(0,h.iH)(a.reservation.title),k=(0,h.iH)(a.reservation.description),S=(0,h.iH)(a.reservation.responsible),x=(0,h.iH)(a.reservation.room),C=(0,h.iH)(a.reservation.reservation_type),H=(0,h.Fl)((()=>null!=a.reservation.periodicity||null!=A.value)),M=(0,h.iH)(a.reservation.email),U=(0,h.iH)(i.fromString(a.reservation.start_time)),j=(0,h.iH)(i.fromString(a.reservation.end_time)),F=(0,h.iH)(a.reservation.date),P=(0,h.iH)(!1),O=(0,h.Fl)((()=>a.reservation.periodicity?a.reservation.periodicity:null)),$=(0,h.iH)(O.value?O.value.periodicity.start:a.reservation.date),E=(0,h.Fl)((()=>{const e=new Date($.value);return e.setDate(e.getDate()+1),e})),R=(0,h.iH)(O.value?O.value.periodicity.end:E.value.toISOString().split("T")[0]),I=new Date(a.reservation.date).getDay(),B=(0,h.Fl)((()=>{const e=a.weekdays.find((e=>e.num===I-1));return e?.ref})),W=(0,h.iH)(O.value?a.periodicityTypes.find((e=>e[0]===O.value?.periodicity.periodicity_type)):a.periodicityTypes[0]);(0,h.YP)((()=>a.reservation),(e=>{const t=e.periodicity;t?(W.value=a.periodicityTypes.find((e=>e[0]===t.periodicity.periodicity_type)),$.value=t.periodicity.start,R.value=t.periodicity.end):(W.value=void 0,$.value=a.reservation.date,R.value=E.value.toISOString().split("T")[0])})),(0,h.YP)(u,(e=>{e&&(U.value=i.fromTime(a.dayStart),j.value=i.fromTime(a.dayEnd))}));const A=(0,h.Fl)((()=>O.value?O.value.periodicity:null)),Y="border border-danger rounded",L=(0,h.Fl)((()=>H.value&&void 0===W.value?Y:"")),Z=60*j.value.hours+j.value.minutes-(60*U.value.hours+U.value.minutes),z=(0,h.iH)({id:W.value&&"BW"===W.value[0]&&O.value?O.value.periodicity.id:-1,start:$.value,end:R.value,periodicity_type:"BW",bw_weekdays:B.value?[B.value]:[],bw_weeks_interval:1}),V=(0,h.iH)({id:W.value&&"BM"===W.value[0]&&O.value?O.value.periodicity.id:-1,start:$.value,end:R.value,periodicity_type:"BM",bm_x_choice:1,bm_day_choice:B.value??""}),N=(0,h.iH)({id:W.value&&"EM"===W.value[0]&&O.value?O.value.periodicity.id:-1,start:$.value,end:R.value,periodicity_type:"EM"});if(a.reservation.periodicity)switch(a.reservation.periodicity.periodicity.periodicity_type){case"BW":{const e=a.reservation.periodicity.periodicity;z.value.bw_weekdays=e.bw_weekdays,z.value.bw_weeks_interval=e.bw_weeks_interval}break;case"BM":{const e=a.reservation.periodicity.periodicity;V.value.bm_day_choice=e.bm_day_choice,V.value.bm_x_choice=e.bm_x_choice}break}const q=(0,h.iH)({BW:z.value,BM:V.value,EM:N.value});function K(){w.value=a.reservation.title,k.value=a.reservation.description,S.value=a.reservation.responsible,x.value=a.reservation.room,C.value=a.reservation.reservation_type,M.value=a.reservation.email,U.value=i.fromString(a.reservation.start_time),j.value=i.fromString(a.reservation.end_time),F.value=a.reservation.date,l.value=!0,r.value=!0,s.value=!0,P.value=!1}function X(){K(),_e()}async function J(){v.value=!0,!a.isNew&&a.reservation.periodicity&&a.reservation.periodicity.periodicity.id>=0?ue():ie()}function G(){se()}function Q(){b.value=!0,P.value=!1,a.onPeriodicityDelete(a.reservation).then((e=>{b.value=!1,se()}))}function ee(){b.value=!0,ie(),y.value=!1,b.value=!1}function te(){b.value=!1,v.value=!1,se()}function ae(){v.value=!1,se()}function oe(){if(console.log("create reservations"),!o.value)return v.value=!1,void se();f.value=!1,ie(!0)}function ne(){if(!W.value||!P.value)return null;let e;switch(W.value[0]){case"BW":e=q.value.BW;break;case"EM":e=q.value.EM;break;case"BM":e=q.value.BM;break}return e.end=R.value,e}function ie(e=!1){const l=ne(),r=l?{periodicity:l}:a.reservation.periodicity,s={date:F.value,description:k.value,email:M.value,end_time:i.toString(j.value),id:Math.max(0,a.reservation.id),periodicity:r,responsible:S.value,room:x.value,start_time:i.toString(U.value),title:w.value,reservation_type:C.value,create_repetitions:e},u=a.isNew?n.post:n.put;u.roomReservation(s).then((e=>{t("saved",e),we()}),(e=>{if(e instanceof Object&&Object.keys(e).includes("periodicity")){const t=e.periodicity;console.log(t);let a=[],n={},i={courses:[],reservations:[]},l=!1;Object.keys(t).includes("ok_reservations")&&(a=t.ok_reservations,l=!0),Object.keys(t).includes("nok_reservations")&&(l?n=t.nok_reservations:i=t.nok_reservations),o.value={possible_reservations:a,impossible_reservations:i,impossible_reservations_per_day:n},ce()}else de(e)})).catch((e=>de(e)))}function le(){A.value&&A.value.id>0?re():(P.value=!1,W.value=void 0)}function re(){m.value=!1,f.value=!1,y.value=!1,p.value=!0}function se(){p.value=!1,f.value=!1,y.value=!1,m.value=!0}function ue(){p.value=!1,f.value=!1,m.value=!1,y.value=!0}function ce(){m.value=!1,p.value=!1,y.value=!1,f.value=!0}function de(e){d.value?.dismissAlerts(),T(e,d.value?.addAlert),v.value=!1}function ve(e){d.value=e}function me(e){F.value=e.replaceAll("/","-"),a.isNew&&($.value=F.value)}function pe(e){R.value=e.replaceAll("/","-")}function ye(e){const t=60*e.hours+e.minutes;let a=60*j.value.hours+j.value.minutes;t>=a&&(a=t+Z,be({hours:Math.trunc(a/60),minutes:a%60})),U.value=e}function be(e){const t=60*e.hours+e.minutes;let a=60*U.value.hours+U.value.minutes;t<=a&&(a=t-Z,ye({hours:Math.trunc(a/60),minutes:a%60})),j.value=e}function he(e){return`edit-room-reservation-${e}-${a.reservation.id}`}function we(){v.value=!1,d.value?.close(),t("closed")}function _e(){d.value?.close(),t("cancelled")}function ge(){P.value=!0}return(0,h.YP)($,(e=>{Object.values(q.value).forEach((t=>{t.start=e}))})),(0,h.YP)(R,(e=>{Object.values(q.value).forEach((t=>{t.end=e}))})),(0,h.m0)((()=>{q.value={BW:z.value,BM:V.value,EM:N.value}})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h.Wm)(Ut,{"is-open":p.value,"is-locked":b.value,"on-cancel":G,"on-confirm":Q},{title:(0,h.w5)((()=>[(0,h.Uk)("Periodicity deletion")])),body:(0,h.w5)((()=>[jt,Ft,Pt])),_:1},8,["is-open","is-locked"]),(0,h.Wm)(Ut,{"is-open":y.value,"is-locked":b.value},{title:(0,h.w5)((()=>[(0,h.Uk)("Reservation changes")])),body:(0,h.w5)((()=>[Ot,$t,Et])),buttons:(0,h.w5)((()=>[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(ee,["stop"])}," Only this one ",8,Rt),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(te,["stop"]),disabled:""}," This one and the next ",8,It)])),_:1},8,["is-open","is-locked"]),(0,h.Wm)(Ut,{"is-open":f.value,"is-locked":b.value},{title:(0,h.w5)((()=>[(0,h.Uk)("Reservation conflicts")])),body:(0,h.w5)((()=>[o.value&&o.value.impossible_reservations_per_day&&o.value.possible_reservations.length>0?((0,h.wg)(),(0,h.iD)("div",Bt,[Wt,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(Object.entries(o.value.impossible_reservations_per_day),(e=>((0,h.wg)(),(0,h.iD)("ul",{class:"text-start mb-2",key:e[0]},[(0,h._)("li",null,(0,h.zw)(e[0]),1)])))),128))])):(0,h.kq)("",!0),o.value&&o.value.impossible_reservations&&0===o.value.possible_reservations.length?((0,h.wg)(),(0,h.iD)("div",At,Lt)):(0,h.kq)("",!0),Zt,o.value&&o.value.possible_reservations.length>0?((0,h.wg)(),(0,h.iD)("div",zt,[Vt,(0,h._)("ul",Nt,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(o.value.possible_reservations,(e=>((0,h.wg)(),(0,h.iD)("li",{key:e.id},(0,h.zw)(new Date(e.date).toLocaleDateString()),1)))),128))])])):(0,h.kq)("",!0)])),buttons:(0,h.w5)((()=>[o.value&&o.value.possible_reservations.length>0?((0,h.wg)(),(0,h.iD)("div",qt,[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(ae,["stop"])}," No ",8,Kt),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(oe,["stop"])}," Yes ",8,Xt)])):((0,h.wg)(),(0,h.iD)("div",Jt,[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(ae,["stop"])}," Cancel ",8,Gt)]))])),_:1},8,["is-open","is-locked"]),(0,h.Wm)(Fe,{"is-open":m.value,"is-locked":v.value,"on-cancel":X,"on-save":J,onInterface:ve,class:"text-start"},{title:(0,h.w5)((()=>[(0,h.Uk)("Room reservation")])),body:(0,h.w5)((()=>[(0,h._)("div",Qt,[(0,h.wy)((0,h._)("input",{id:he("title"),type:"text",class:"form-control",placeholder:"Title",maxlength:"30","onUpdate:modelValue":t[0]||(t[0]=e=>w.value=e)},null,8,ea),[[h.nr,w.value]]),(0,h._)("label",{for:he("title"),class:"form-label"},"Title",8,ta)]),(0,h._)("div",aa,[(0,h.wy)((0,h._)("textarea",{id:he("description"),type:"text",class:"form-control",placeholder:"Description",rows:"2","onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e)},null,8,oa),[[h.nr,k.value]]),(0,h._)("label",{for:he("description"),class:"form-label"},"Description",8,na)]),(0,h._)("div",ia,[(0,h.wy)((0,h._)("select",{class:"form-select",id:he("room"),"onUpdate:modelValue":t[2]||(t[2]=e=>x.value=e)},[ra,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.rooms,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.name),9,sa)))),128))],8,la),[[h.bM,x.value]]),(0,h._)("label",{for:he("room"),class:"form-label"},"Room",8,ua)]),(0,h._)("div",ca,[(0,h.Wm)(fe,{"start-date":F.value,"should-reset":l.value,"on-reset":l.value=!1,"onUpdate:date":me,"min-date":new Date,clearable:!1},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",da,[(0,h._)("input",{id:he("date"),type:"text",class:"form-control",placeholder:"Date",value:e},null,8,va),(0,h._)("label",{for:he("date"),class:"form-label"},"Date",8,ma)])])),_:1},8,["start-date","should-reset","on-reset","min-date"])]),(0,h._)("div",pa,[(0,h._)("div",ya,[(0,h._)("div",ba,[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),role:"switch",id:he("wholeDay")},null,8,fa),[[h.e8,u.value]]),(0,h._)("label",{class:"form-check-label",for:he("wholeDay")},"Whole day",8,ha)])]),u.value?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("div",wa,[(0,h._)("div",_a,[(0,h.Wm)(Ee,{hours:U.value.hours,minutes:U.value.minutes,onUpdateTime:ye,"should-reset":r.value,onOnReset:t[4]||(t[4]=e=>r.value=!1)},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",ga,[(0,h._)("input",{id:he("startTime"),type:"text",class:"form-control",placeholder:"Start time",value:e,readonly:""},null,8,ka),(0,h._)("label",{for:he("startTime"),class:"form-label"},"Start time",8,Da)])])),_:1},8,["hours","minutes","should-reset"])]),(0,h._)("div",Sa,[(0,h.Wm)(Ee,{hours:j.value.hours,minutes:j.value.minutes,onUpdateTime:be,"should-reset":s.value,onOnReset:t[5]||(t[5]=e=>s.value=!1)},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",xa,[(0,h._)("input",{id:he("endTime"),type:"text",class:"form-control",placeholder:"End time",value:e,readonly:""},null,8,Ca),(0,h._)("label",{for:he("endTime"),class:"form-label"},"End time",8,Ta)])])),_:1},8,["hours","minutes","should-reset"])])]))]),(0,h._)("div",Ha,[(0,h._)("input",{id:he("responsible"),type:"text",class:"form-control",placeholder:"Responsible",value:(0,h.SU)(c),disabled:""},null,8,Ma),(0,h._)("label",{for:he("responsible"),class:"form-label"},"Responsible",8,Ua)]),(0,h._)("div",ja,[(0,h.wy)((0,h._)("select",{class:"form-select",id:he("reservationType"),"onUpdate:modelValue":t[6]||(t[6]=e=>C.value=e)},[Pa,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(a.reservationTypes,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.name),9,Oa)))),128))],8,Fa),[[h.bM,C.value]]),(0,h._)("label",{for:he("reservationType"),class:"form-label"},"Reservation type",8,$a)]),(0,h.SU)(H)||P.value?((0,h.wg)(),(0,h.iD)("div",Ra,[(0,h._)("div",{class:"mb-2 text-center"},[(0,h._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:le}," Remove repetition ")]),(0,h._)("div",Ia,[(0,h._)("div",Ba,[(0,h.Wm)(fe,{"start-date":R.value,"should-reset":l.value,"on-reset":l.value=!1,"onUpdate:date":pe,"min-date":(0,h.SU)(E),clearable:!1},{input:(0,h.w5)((({value:e})=>[(0,h._)("div",Wa,[(0,h._)("input",{id:he("periodicity-end-date"),type:"text",class:"form-control",placeholder:"Date",value:e,readonly:"",disabled:(0,h.SU)(H)},null,8,Aa),(0,h._)("label",{for:he("periodicity-end-date"),class:"form-label"},"Until",8,Ya)])])),_:1},8,["start-date","should-reset","on-reset","min-date"])])]),(0,h.Wm)(mt,{class:(0,h.C_)((0,h.SU)(L)),types:a.periodicityTypes,weekdays:a.weekdays,"model-type":W.value,"onUpdate:model-type":t[7]||(t[7]=e=>W.value=e),modelPeriodicity:q.value,"onUpdate:modelPeriodicity":t[8]||(t[8]=e=>q.value=e),"is-disabled":(0,h.SU)(H)},null,8,["class","types","weekdays","model-type","modelPeriodicity","is-disabled"])])):((0,h.wg)(),(0,h.iD)("div",Ea,[(0,h._)("button",{type:"button",class:"btn btn-info",onClick:ge},"Repeat")])),(0,h._)("div",La,[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>M.value=e),role:"switch",id:he("email"),disabled:""},null,8,Za),[[h.e8,M.value]]),(0,h._)("label",{class:"form-check-label",for:he("email")},"Send a confirm email?",8,za)])])),_:1},8,["is-open","is-locked"])]))}});const qa=Na;var Ka=qa;const Xa={class:"row m-0 h-100"},Ja={name:"CalendarRoomReservationSlot",components:{}};var Ga=(0,h.aZ)({...Ja,props:{data:null,actions:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(!1),n=(0,h.iH)(0),i=(0,h.iH)(),l=(0,h.iH)(!1);function r(){1!=++n.value?(clearTimeout(i.value),n.value=0,u()):i.value=setTimeout((()=>{n.value=0,s()}),300)}function s(){l.value||console.log(`Click on ${a.data.title}`)}function u(){l.value||b()}function c(e){const t=Object.assign({},a.data);t.reservation=e,a.actions.save?.(t,a.data)}function d(){a.actions.delete?.(a.data)}function v(){console.log("On duplicate")}function m(){f(),a.data.reservation.id<0&&d()}function p(){return o.value=!0,o.value}function y(){o.value=!1}function b(){l.value=!0}function f(){l.value=!1}function w(){t("interface",a.data.id,{openContextMenu:p,closeContextMenu:y})}return(0,h.bv)((()=>{w(),a.data.reservation.id<0&&(l.value=!0)})),(e,t)=>{const n=(0,h.up)("PopperComponent");return(0,h.wg)(),(0,h.j4)(n,{id:a.data.id,class:"frame",show:o.value,style:(0,h.j5)(a.data.displayStyle),arrow:"",onClick:(0,h.iM)(r,["left"])},{content:(0,h.w5)((()=>[(0,h.WI)(e.$slots,"contextmenu",{},(()=>[(0,h.Wm)(me,{data:a.data,"on-delete":d,"on-edit":u,"on-duplicate":v},null,8,["data"])]))])),default:(0,h.w5)((()=>[(0,h._)("div",null,[(0,h.Wm)(Ka,{reservation:a.data.reservation,"is-open":l.value,"is-new":a.data.reservation.id<0,rooms:a.data.rooms,"reservation-types":a.data.reservationTypes,"periodicity-types":a.data.periodicityTypes,users:a.data.users,weekdays:a.data.weekdays,periodicity:a.data.periodicity,"on-periodicity-delete":a.data.onPeriodicityDelete,"day-start":a.data.dayStart,"day-end":a.data.dayEnd,onClosed:f,onSaved:c,onCancelled:m},null,8,["reservation","is-open","is-new","rooms","reservation-types","periodicity-types","users","weekdays","periodicity","on-periodicity-delete","day-start","day-end"]),(0,h._)("div",Xa,[(0,h.WI)(e.$slots,"text")])])])),_:3},8,["id","show","style","onClick"])}}}),Qa=a(3744);const eo=(0,Qa.Z)(Ga,[["__scopeId","data-v-3bdd8a2a"]]);var to=eo;const ao={class:"col-xl-6"},oo={class:"col-xl-6"},no={class:"col-xl-6"},io={class:"col-xl-6"},lo={name:"HourCalendarRoomReservationSlot",components:{}};var ro=(0,h.aZ)({...lo,props:{data:null,actions:null},setup(e){const t=e,a=(0,h.Fl)((()=>{const e=t.data.users[t.data.reservation.responsible];return e?.username})),o=(0,h.Fl)((()=>{const e=t.data.rooms[t.data.reservation.room];return e?.name}));return(e,n)=>((0,h.wg)(),(0,h.j4)(to,{data:t.data,actions:t.actions},{text:(0,h.w5)((()=>[(0,h._)("p",ao,(0,h.zw)(t.data.title),1),(0,h._)("p",oo,(0,h.zw)(t.data.reservation.description),1),(0,h._)("p",no,(0,h.zw)((0,h.SU)(a)),1),(0,h._)("p",io,(0,h.zw)((0,h.SU)(o)),1)])),_:1},8,["data","actions"]))}});const so=ro;var uo=so;const co={class:"col-xl-auto"},vo={class:"col-xl-auto"},mo={class:"col-xl-auto ms-auto"},po={name:"RoomCalendarRoomReservationSlot",components:{}};var yo=(0,h.aZ)({...po,props:{data:null,actions:null},setup(e){const t=e,a=(0,h.Fl)((()=>{const e=t.data.users[t.data.reservation.responsible];return e?.username}));return(e,o)=>((0,h.wg)(),(0,h.j4)(to,{data:t.data,actions:t.actions},{text:(0,h.w5)((()=>[(0,h._)("p",co,(0,h.zw)(t.data.reservation.title),1),(0,h._)("p",vo,(0,h.zw)((0,h.SU)(a)),1),(0,h._)("p",mo,(0,h.zw)(t.data.startTime.text)+"-"+(0,h.zw)(t.data.endTime.text),1)])),_:1},8,["data","actions"]))}});const bo=yo;var fo=bo;const ho={class:"row m-0 course"},wo={name:"CalendarScheduledCourseSlot",components:{}};var _o=(0,h.aZ)({...wo,props:{data:null},emits:["interface"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(!1);function n(){console.log(a.data.title)}function i(){return!1}function l(){}function r(){t("interface",a.data.id,{openContextMenu:i,closeContextMenu:l})}return(0,h.bv)((()=>{r()})),(e,t)=>{const i=(0,h.up)("PopperComponent");return(0,h.wg)(),(0,h.j4)(i,{id:a.data.id,class:"frame",show:o.value,style:(0,h.j5)(a.data.displayStyle),onClick:n},{content:(0,h.w5)((()=>[])),default:(0,h.w5)((()=>[(0,h._)("div",ho,[(0,h.WI)(e.$slots,"text")])])),_:3},8,["id","show","style"])}}});const go=(0,Qa.Z)(_o,[["__scopeId","data-v-374ac3eb"]]);var ko=go;const Do={class:"col-xl-6"},So={class:"col-xl-6"},xo={class:"col-xl-6"},Co={class:"col-xl-6"},To={name:"HourCalendarScheduledCourseSlot",components:{}};var Ho=(0,h.aZ)({...To,props:{data:null},setup(e){const t=e,a=(0,h.Fl)((()=>{let e;return t.data.course.room?(e=t.data.rooms[t.data.course.room.id],e.name):"UNKNOWN"}));return(e,o)=>((0,h.wg)(),(0,h.j4)(ko,{data:t.data},{text:(0,h.w5)((()=>[(0,h._)("p",Do,(0,h.zw)(t.data.course.course.module.abbrev),1),(0,h._)("p",So,(0,h.zw)(t.data.department),1),(0,h._)("p",xo,(0,h.zw)(t.data.course.tutor),1),(0,h._)("p",Co,(0,h.zw)((0,h.SU)(a)),1)])),_:1},8,["data"]))}});const Mo=Ho;var Uo=Mo;const jo={class:"col-xl-auto"},Fo={class:"col-xl-auto"},Po={class:"col-xl-auto ms-auto"},Oo={name:"RoomCalendarScheduledCourseSlot",components:{}};var $o=(0,h.aZ)({...Oo,props:{data:null},setup(e){const t=e;return(e,a)=>((0,h.wg)(),(0,h.j4)(ko,{data:t.data},{text:(0,h.w5)((()=>[(0,h._)("p",jo,(0,h.zw)(t.data.course.course.module.abbrev),1),(0,h._)("p",Fo,(0,h.zw)(t.data.course.tutor),1),(0,h._)("p",Po,(0,h.zw)(t.data.startTime.text)+"-"+(0,h.zw)(t.data.endTime.text),1)])),_:1},8,["data"]))}});const Eo=$o;var Ro=Eo;const Io=["for"],Bo=["id"],Wo=(0,h._)("option",{value:void 0},"Select an attribute",-1),Ao=["value","onClick"],Yo={class:"list-group"},Lo=["value"],Zo={name:"DynamicSelect",components:{}};var zo=(0,h.aZ)({...Zo,props:{values:null,selectedValues:null,label:null,id:null},emits:["update:selectedValues"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(a.values);function n(e,t){const a=o.value.findIndex((t=>t.value.id===e));a<0||(o.value[a].value=t,c())}(0,h.m0)((()=>{o.value=a.values}));const i=(0,h.iH)(a.selectedValues.map((e=>e.value.id))),l=(0,h.Fl)((()=>o.value.filter((e=>i.value.includes(e.value.id))))),r=(0,h.Fl)((()=>o.value.filter((e=>!i.value.includes(e.value.id)))));function s(e){i.value.push(e),c()}function u(e){i.value=i.value.filter((t=>t!=e)),c()}function c(){t("update:selectedValues",l.value)}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[(0,h._)("label",{for:a.id,class:"form-label"},(0,h.zw)(a.label),9,Io),(0,h._)("select",{id:a.id,class:"form-select w-auto ms-1","aria-label":"Select department"},[Wo,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(r),(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.value.id,value:e.value.id,onClick:t=>s(e.value.id)},(0,h.zw)(e.value.name),9,Ao)))),128))],8,Bo),(0,h._)("ul",Yo,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(Array.from(Array((0,h.SU)(l).length).keys()),(e=>((0,h.wg)(),(0,h.iD)("li",{key:(0,h.SU)(l)[e].value.id,value:(0,h.SU)(l)[e].value,class:"list-group-item"},[((0,h.wg)(),(0,h.j4)((0,h.LL)((0,h.SU)(l)[e].component),{value:(0,h.SU)(l)[e].value,"onUpdate:value":t=>n((0,h.SU)(l)[e].value.id,t),onRemoved:t=>u((0,h.SU)(l)[e].value.id)},null,40,["value","onUpdate:value","onRemoved"]))],8,Lo)))),128))])]))}});const Vo=zo;var No=Vo;const qo={class:"row"},Ko={class:"col"},Xo={name:"DynamicSelectedElement",components:{}};var Jo=(0,h.aZ)({...Xo,props:{value:null},emits:["removed"],setup(e,{emit:t}){const a=e;function o(){t("removed",a.value.id)}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",qo,[(0,h._)("button",{type:"button",class:"btn-close col-auto","aria-label":"Close",onClick:o}),(0,h._)("div",Ko,(0,h.zw)(a.value.name),1),(0,h.WI)(e.$slots,"input")]))}});const Go=Jo;var Qo=Go,en=a(1231);const tn={name:"DoubleThumbSlider",components:{}};var an=(0,h.aZ)({...tn,props:{initialMin:null,initialMax:null,min:null,max:null},emits:["update:min","update:max"],setup(e,{emit:t}){const a=e,o=(0,h.iH)();function n(e){if(!s.value)return o.value.valueMin=a.min,void(o.value.valueMax=a.max)}function i(){t("update:min",o.value.valueMin),t("update:max",o.value.valueMax)}function l(){u()}function r(){c(),i()}const s=(0,h.iH)(!1);function u(){s.value=!0}function c(){s.value=!1}return(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(en.Z),{ref_key:"slider",ref:o,"base-class-name":"multi-range-slider slider",min:a.initialMin,max:a.initialMax,ruler:!1,label:!1,"min-value":a.initialMin,"max-value":a.initialMax,onInput:n,onMouseup:i,onMouseenter:l,onMouseleave:r},null,8,["min","max","min-value","max-value"]))}});const on=an;var nn=on;const ln={name:"DynamicSelectedElementNumeric",components:{}};var rn=(0,h.aZ)({...ln,props:{value:null},emits:["update:value"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(a.value),n=(0,h.iH)(o.value.min),i=(0,h.iH)(o.value.max);return(0,h.YP)(n,(e=>{o.value.min=e,t("update:value",o.value)})),(0,h.YP)(i,(e=>{o.value.max=e,t("update:value",o.value)})),(e,t)=>((0,h.wg)(),(0,h.j4)(Qo,{value:a.value},{input:(0,h.w5)((()=>[(0,h.Wm)(nn,{"initial-min":a.value.initialMin,"initial-max":a.value.initialMax,min:n.value,"onUpdate:min":t[0]||(t[0]=e=>n.value=e),max:i.value,"onUpdate:max":t[1]||(t[1]=e=>i.value=e)},null,8,["initial-min","initial-max","min","max"])])),_:1},8,["value"]))}});const sn=rn;var un=sn;const cn={class:"form-check form-switch"},dn={name:"DynamicSelectedElementBoolean",components:{}};var vn=(0,h.aZ)({...dn,props:{value:null},emits:["update:value"],setup(e,{emit:t}){const a=e,o=(0,h.iH)(a.value),n=(0,h.Fl)({get(){return o.value.value},set(e){o.value.value=e}});return t("update:value",o.value),(e,t)=>((0,h.wg)(),(0,h.j4)(Qo,{value:a.value},{input:(0,h.w5)((()=>[(0,h._)("div",null,[(0,h._)("div",cn,[(0,h.wy)((0,h._)("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":t[0]||(t[0]=e=>(0,h.dq)(n)?n.value=e:null)},null,512),[[h.e8,(0,h.SU)(n)]])])])])),_:1},8,["value"]))}});const mn=vn;var pn=mn;const yn={class:"row"},bn=["for"],fn={key:0,class:"col-auto pe-0"},hn={class:"col-auto"},wn=["id"],_n={name:"ClearableInput",components:{}};var gn=(0,h.aZ)({..._n,props:{inputId:null,label:null,text:null},emits:["update:text"],setup(e,{emit:t}){const a=e,o=(0,h.Fl)({get(){return a.text},set(e){t("update:text",e)}});function n(){o.value=""}return(e,t)=>((0,h.wg)(),(0,h.iD)("div",yn,[(0,h._)("label",{for:a.inputId,class:"form-label"},(0,h.zw)(a.label),9,bn),a.text.length>0?((0,h.wg)(),(0,h.iD)("div",fn,[(0,h._)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=e=>n())})])):(0,h.kq)("",!0),(0,h._)("div",hn,[(0,h.wy)((0,h._)("input",{id:a.inputId,type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>(0,h.dq)(o)?o.value=e:null)},null,8,wn),[[h.nr,(0,h.SU)(o)]])])]))}});const kn=gn;var Dn=kn;const Sn=(0,h._)("span",null," You are about to remove a reservation related to a periodicity, would you want to remove only this reservation, all the related reservations or this one and all the next? ",-1),xn=["onClick"],Cn=["onClick","disabled"],Tn={key:0},Hn=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Mn=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),Un=[Hn,Mn],jn={key:1},Fn=["onClick","disabled"],Pn={key:0},On=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),$n=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),En=[On,$n],Rn={key:1},In=["onClick","disabled"],Bn={key:0},Wn=(0,h._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),An=(0,h._)("span",{class:"visually-hidden"},"Loading...",-1),Yn=[Wn,An],Ln={key:1},Zn={name:"DeletePeriodicReservationDialog",components:{}};var zn=(0,h.aZ)({...Zn,props:{isOpen:{type:Boolean},reservation:null,onCancel:null,onConfirmCurrent:null,onConfirmAll:null,onConfirmFuture:null},setup(e){const t=e,a=(0,h.iH)(!1),o=(0,h.Fl)((()=>n.value||i.value||l.value)),n=(0,h.iH)(!1),i=(0,h.iH)(!1),l=(0,h.iH)(!1);function r(){t.onCancel()}function s(){n.value=!0,t.onConfirmCurrent(t.reservation)}function u(){i.value=!0,t.onConfirmAll(t.reservation)}function c(){l.value=!0,t.onConfirmFuture(t.reservation)}return(0,h.YP)((()=>t.isOpen),(e=>{n.value=!1,i.value=!1,l.value=!1})),(0,h.bv)((()=>{a.value=!0})),(e,a)=>((0,h.wg)(),(0,h.j4)(Ut,{"is-open":t.isOpen},{title:(0,h.w5)((()=>[(0,h.Uk)("Reservation deletion")])),body:(0,h.w5)((()=>[Sn])),buttons:(0,h.w5)((()=>[(0,h._)("button",{type:"button",class:"btn btn-secondary",onClick:(0,h.iM)(r,["stop"])},"Cancel",8,xn),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(s,["stop"]),disabled:(0,h.SU)(o)},[n.value?((0,h.wg)(),(0,h.iD)("span",Tn,Un)):((0,h.wg)(),(0,h.iD)("span",jn,"Just this one"))],8,Cn),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(u,["stop"]),disabled:(0,h.SU)(o)},[i.value?((0,h.wg)(),(0,h.iD)("span",Pn,En)):((0,h.wg)(),(0,h.iD)("span",Rn,"All"))],8,Fn),(0,h._)("button",{type:"button",class:"btn btn-primary",onClick:(0,h.iM)(c,["stop"]),disabled:(0,h.SU)(o)},[l.value?((0,h.wg)(),(0,h.iD)("span",Bn,Yn)):((0,h.wg)(),(0,h.iD)("span",Ln,"This one and all the next"))],8,In)])),_:1},8,["is-open"]))}});const Vn=zn;var Nn=Vn,qn=a(6086);let Kn="";const Xn=document.getElementById("json_data");if(Xn&&Xn.textContent){const e=JSON.parse(Xn.textContent);"api"in e&&(Kn=e.api)}function Jn(e){if(!document.cookie)return null;const t=document.cookie.split(";").map((e=>e.trim())).filter((t=>t.startsWith(e+"=")));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}const Gn=Jn("csrftoken");function Qn(e){const t=new Headers;return t.set("Content-Type","application/json"),Gn&&t.set("X-CSRFToken",Gn),{method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:t,redirect:"follow",referrerPolicy:"same-origin"}}async function ei(e,t){return await fetch(e,t).then((async e=>{const t=await e.json();if(!e.ok){const a=t||`Error ${e.status}: ${e.statusText}`;return Promise.reject(a)}return t})).catch((e=>Promise.reject(e)))}async function ti(e,t){const a=Qn("GET");let o="";t&&(o=Object.keys(t).map((e=>e+"="+t[e])).join("&"));const n=`${Kn}${e}/?${o}`;return console.log(`Fetching ${n}...`),ei(n,a)}async function ai(e,t,a){if(!["PUT","POST","DELETE","PATCH"].includes(e))return Promise.reject("Method must be either PUT, POST, PATCH, or DELETE");const o=Qn(e);a.data&&(o.body=JSON.stringify(a.data));let n="/";a.id&&(n=`/${a.id}/`);const i=`${Kn}${t}${n}`;return console.log(`Updating ${i}...`),ei(i,o)}function oi(e,t,a){const o={id:t,data:a};return ai("PUT",e,o)}function ni(e,t){const a={data:t};return ai("POST",e,a)}function ii(e,t,a){const o={id:t,data:a};return ai("PATCH",e,o)}const li=[];class ri{constructor(e,t,a,o){(0,D.Z)(this,"convertToApp",void 0),(0,D.Z)(this,"convertToAPI",void 0),(0,D.Z)(this,"onFetch",void 0),(0,D.Z)(this,"url",void 0),this.url=e,this.convertToApp=t,this.convertToAPI=a,this.onFetch=o}convertToPartialAPI(e){return Object.fromEntries(Object.entries(e).map((e=>{const t=e[0],a=e[1];return a?typeof a===typeof li?[t,U(a)]:[t,a]:[]})))}async retrieve(e){return ti(this.url,{id:e}).then(this.convertToApp)}async fetch(){return ti(this.url,{}).then((e=>e.map(this.convertToApp))).then(this.onFetch)}async update(e,t){return oi(this.url,e,this.convertToAPI(t)).then(this.convertToApp)}async create(e){return ni(this.url,this.convertToAPI(e)).then(this.convertToApp)}async partialUpdate(e,t){return ii(this.url,e,this.convertToPartialAPI(t)).then(this.convertToApp)}}function si(e){return{id:e.id??-1,abbrev:e.abbrev??"Unknown"}}function ui(e){return{id:e.id??-1,abbrev:e.abbrev??"Unknown"}}const ci=(0,qn.Q_)("department",(()=>{const e=(0,h.iH)([]),t=(0,h.Fl)((()=>e.value)),a=new ri("fetch/alldepts",si,ui,(t=>e.value=t));return{departments:t,remote:a}})),di=(0,qn.Q_)("room",(()=>{const e=(0,h.iH)([]),t=(0,h.Fl)((()=>e.value)),a=new ri("rooms/room",i,l,(t=>e.value=t)),o=(0,h.Fl)((()=>Object.fromEntries(e.value.map((e=>[e.id,e]))))),n=(0,h.Fl)((()=>{const t=ci(),a={};return t.departments.forEach((t=>{a[t.id]=e.value.filter((e=>e.departments.findIndex((e=>e.id===t.id))>=0))})),a}));function i(e){const t=ci(),a=di();return{id:e.id??-1,departments:e.departments?t.departments.filter((t=>e.departments?.includes(t.id))):[],basic_rooms:e.basic_rooms??[],is_basic:e.is_basic??!0,name:e.name??"Unknown",subroom_of:a.rooms.filter((t=>e.id===t.id))}}function l(e){return{id:e.id??-1,departments:e.departments?U(e.departments):[],basic_rooms:e.basic_rooms??[],is_basic:e.is_basic??!0,name:e.name??"Unknown",subroom_of:e.subroom_of?U(e.subroom_of):[]}}return{rooms:t,remote:a,perId:o,perDepartment:n}})),vi=e=>((0,h.dD)("data-v-7065c654"),e=e(),(0,h.Cn)(),e),mi={key:0,class:"loader"},pi={class:"container-fluid"},yi={class:"row"},bi={class:"col-6 col-md-5 col-lg-4 col-xl-3"},fi={class:"row"},hi={class:"col"},wi={class:"row mb-3"},_i=vi((()=>(0,h._)("label",{for:"select-room",class:"form-label"},"Room:",-1))),gi={key:0,class:"col-auto pe-0"},ki={class:"col-auto"},Di=vi((()=>(0,h._)("option",{value:void 0},"All rooms",-1))),Si=["value"],xi={class:"row mb-3"},Ci=vi((()=>(0,h._)("label",{for:"select-department",class:"form-label"},"Department:",-1))),Ti={key:0,class:"col-auto pe-0"},Hi={class:"col-auto"},Mi=vi((()=>(0,h._)("option",{value:void 0},"All departments",-1))),Ui=["value"],ji={key:0,class:"row"},Fi={class:"mb-3"},Pi={class:"mb-3"},Oi={class:"col"},$i={class:"row"},Ei={class:"col-auto"},Ri={name:"RoomReservationView",components:{}};var Ii=(0,h.aZ)({...Ri,setup(e){const t=(0,h.iH)(g(_)),a=(0,h.iH)(g(w));let o="",n=-1,i=0;const l=ci(),r=di(),s={list:(0,h.iH)([])},u={perDepartmentFilterBySelectedDepartments:(0,h.Fl)((()=>ee(r.perDepartment))),listFilterBySelectedDepartments:(0,h.Fl)((()=>{const e=[];return Object.values(u.perDepartmentFilterBySelectedDepartments.value).forEach((t=>{e.push(...t.filter((t=>!e.find((e=>e.id===t.id)))))})),r.rooms.forEach((t=>{0===t.departments.length&&e.findIndex((e=>e.id===t.id))<0&&e.push(t)})),e})),perIdFilterBySelectedDepartments:(0,h.Fl)((()=>Object.fromEntries(u.listFilterBySelectedDepartments.value.filter((e=>e.is_basic)).sort(((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))).map((e=>[e.id,e]))))),listFilterBySelectedDepartmentsAndFilters:(0,h.Fl)((()=>{const e=[[Y.value,k.booleanList.value,(e,t)=>e.value!==t.value],[L.value,k.numericList.value,(e,t)=>Number(t.value)>=e.min&&Number(t.value)<=e.max]];let t=Object.values(u.perIdFilterBySelectedDepartments.value).filter((e=>e.name.toLowerCase().includes(z.value.toLowerCase())));return t=t.filter((t=>{const a=t.id;let o=!0;return e.forEach((e=>{if(!o)return;const t=e[0],n=e[1],i=e[2];t.length>0&&t.forEach((e=>{const t=n.filter((t=>t.attribute===e.id));if(t.length>0){const n=t.find((e=>e.room===a));if(n&&!i(e,n))return void(o=!1)}}))})),o})),t}))},c={list:(0,h.Fl)((()=>Object.values(c.perDepartment.value).flat(1))),perDepartment:(0,h.iH)({}),perDepartmentFilterByDepartmentsAndRooms:(0,h.Fl)((()=>Object.fromEntries(Object.entries(c.perDepartment.value).map((e=>[e[0],e[1].filter((e=>Ue(e.room.id)&&Me(e.room.id)))]))))),perDay:(0,h.Fl)((()=>H(c.list.value,(e=>{const t=s.list.value.find((t=>t.ref===e.day))?.date;return t||"dateNotFound"})))),perDayPerRoomFilterBySelectedDepartments:(0,h.Fl)((()=>{const e={};return Object.entries(c.perDay.value).forEach((t=>{const a=t[0],o=t[1].filter((e=>{const t=je(e);return t&&W.value.includes(t)}));e[a]=H(o,(e=>`${e.room?.id}`))})),e})),perDayPerRoom:(0,h.Fl)((()=>{const e={};return Object.entries(c.perDay.value).forEach((t=>{const a=t[0],o=t[1];e[a]=H(o,(e=>`${e.room?.id}`))})),e}))},d={perDepartment:(0,h.iH)({}),listFilterBySelectedDepartments:(0,h.Fl)((()=>Object.values(ee(d.perDepartment.value)).flat(1)))},v={list:(0,h.iH)([]),perDay:(0,h.Fl)((()=>H(v.list.value,(e=>{const t=new Date(e.date);return He(t.getDate(),t.getMonth()+1)}))))},m={list:(0,h.iH)([]),perId:(0,h.Fl)((()=>Object.fromEntries(m.list.value.map((e=>[e.id,e])))))},p={list:(0,h.iH)([]),perId:(0,h.Fl)((()=>Object.fromEntries(p.list.value.map((e=>[e.periodicity.id,e])))))},y=(0,h.iH)([]),b={list:(0,h.iH)([]),perId:(0,h.Fl)((()=>Object.fromEntries(b.list.value.map((e=>[e.id,e])))))},f={booleanList:(0,h.iH)([]),numericList:(0,h.iH)([])},k={booleanList:(0,h.iH)([]),numericList:(0,h.iH)([])},D=(0,h.iH)(),S=(0,h.iH)({value:0,text:""}),x=(0,h.iH)({value:0,text:""}),U=(0,h.iH)({value:0,text:""}),j=(0,h.iH)({value:0,text:""}),F=60,P="#3399ff",O=(0,h.iH)({week:a.value.week,year:a.value.year}),$=(0,h.iH)(!1),E=(0,h.iH)(),R=(0,h.iH)(!1),I=(0,h.iH)(),B=(0,h.iH)(),W=(0,h.Fl)((()=>{let e=[];if(B.value)e.push(B.value);else{if(!l.departments)return[];e=l.departments}return e})),A=(0,h.iH)([]),Y=(0,h.Fl)((()=>A.value.filter((e=>e.component===(0,h.Xl)(pn))).map((e=>e.value)))),L=(0,h.Fl)((()=>A.value.filter((e=>e.component===(0,h.Xl)(un))).map((e=>e.value)))),z=(0,h.iH)(""),V={list:(0,h.Fl)((()=>v.list.value.map(ae))),perDay:(0,h.Fl)((()=>{const e=Object.fromEntries(Object.entries(H(V.list.value,(e=>{const t=new Date(e.slotData.reservation.date);return He(t.getDate(),t.getMonth()+1)}))));return e})),perDayFilterBySelectedDepartmentsAndRooms:(0,h.Fl)((()=>{const e=Object.fromEntries(Object.entries(V.perDay.value).map((e=>[e[0],e[1].filter((e=>{const t=e.slotData.reservation.room;return Ue(t)&&Me(t)}))])));return e})),perDayPerRoomFilterBySelectedDepartments:(0,h.Fl)((()=>{const e=Object.fromEntries(Object.entries(V.perDay.value).map((e=>[e[0],H(e[1].filter((e=>Me(e.slotData.reservation.room))),(e=>`${e.slotData.reservation.room}`))])));return e}))},N={perRooms:(0,h.Fl)((()=>{const e={};return Object.entries(c.perDepartmentFilterByDepartmentsAndRooms.value).map((t=>{const a=t[0];t[1].forEach((t=>{const o=s.list.value.find((e=>e.ref===t.day));if(!o)return;let n=d.perDepartment.value[a].find((e=>e.name===t.course.type));n||(n={name:"unknow",duration:0});const i=o.date,l=oe(t,n,a);ie(e,i,l)}))})),e})),perDayPerRoom:(0,h.Fl)((()=>{const e={};Object.entries(c.perDayPerRoom.value).forEach((t=>{e[t[0]]=Object.fromEntries(Object.entries(t[1]).map((e=>{const t=[];return e[1].forEach((a=>{let o=je(a);o||(console.log("has no department"),o={id:-1,abbrev:"UNK"});let n=d.perDepartment.value[o.id].find((e=>e.name===a.course.type));n||(console.log("is not of a good type"),n={name:"Unknown",duration:60});const i=`${o.id}`;let l={departments:[],id:-1,name:"",subroom_of:[],is_basic:!1,basic_rooms:[]};if(a.room)if(l=r.perId[a.room.id],l.is_basic)Me(a.room.id)||console.log("is not in good department"),t.push(oe(a,n,i));else{let o=!1;l.basic_rooms.forEach((e=>{Me(e.id)&&(o=!0)})),o||console.log("No subrooms in good departments"),l.basic_rooms.forEach((o=>{const l=JSON.parse(JSON.stringify(a));l.room={id:o.id,name:o.name},e[0]=l.room.id.toString(),t.push(oe(l,n,i))}))}})),[e[0],t]})))}));const t={};for(const[a,o]of Object.entries(e)){t[a]={};for(const[e,n]of Object.entries(o))for(const o of n){let e=o.slotData.course.room?.id;e||(e=-1),t[a][e]||(t[a][e]=[]),t[a][e].push(o)}}return t}))},q=(0,h.iH)(),K={perDay:(0,h.Fl)((()=>{const e={};if(q.value){const t=q.value,a=ae(t),o=new Date(t.date),n=He(o.getDate(),o.getMonth()+1);ie(e,n,a)}return e})),perDayPerRoom:(0,h.Fl)((()=>{const e={};if(q.value){const t=q.value,a=ae(t),o=new Date(t.date),n=He(o.getDate(),o.getMonth()+1);e[n]={},ie(e[n],t.room,a)}return e}))},J=(0,h.Fl)((()=>({days:s.list.value,year:`${O.value.year}`}))),G=(0,h.Fl)((()=>{const e={};for(const t of[V.perDayFilterBySelectedDepartmentsAndRooms.value,N.perRooms.value,K.perDay.value])Object.keys(t).forEach((a=>{t[a].forEach((t=>{ie(e,a,t)}))}));return Object.entries(e).forEach((e=>{e[1].sort(((e,t)=>e.slotData.startTime.value-t.slotData.startTime.value))})),Object.assign({slots:e,startTime:S.value.value,endTime:x.value.value},J.value)})),Q=(0,h.Fl)((()=>{const e={};for(const t of[V.perDayPerRoomFilterBySelectedDepartments.value,N.perDayPerRoom.value,K.perDayPerRoom.value])Object.entries(t).forEach((t=>{const a=t[0];a in e||(e[a]={}),Object.entries(t[1]).forEach((t=>{t[1].forEach((o=>ie(e[a],t[0],o)))}))}));return Object.values(e).forEach((e=>{Object.values(e).forEach((e=>e.sort(((e,t)=>e.slotData.startTime.value-t.slotData.startTime.value))))})),Object.assign({slots:e,rooms:u.listFilterBySelectedDepartments.value.filter((e=>e.is_basic&&u.listFilterBySelectedDepartmentsAndFilters.value.findIndex((t=>t.id===e.id))>=0)).sort(((e,t)=>e.name.localeCompare(t.name)))},J.value)}));function ee(e){const t=Object.fromEntries(Object.entries(e).filter((([e])=>W.value.findIndex((t=>`${t.id}`===e))>=0)));return t}function te(e){if(!e)return;let t=e[0].day_start_time,a=e[0].day_finish_time,o=e[0].lunch_break_start_time,n=e[0].lunch_break_finish_time;e.forEach((e=>{t=Math.min(t,e.day_start_time),a=Math.max(a,e.day_finish_time),o=Math.min(o,e.lunch_break_start_time),n=Math.max(n,e.lunch_break_finish_time)})),S.value=M(t),x.value=M(a),U.value=M(o),j.value=M(n)}function ae(e){const t=e.start_time.split(":"),a=60*parseInt(t[0])+parseInt(t[1]),o=M(a),n=e.end_time.split(":"),i=60*parseInt(n[0])+parseInt(n[1]),l=M(i);let r="#ffffff";if(e.reservation_type in m.perId.value){const t=m.perId.value[e.reservation_type];r=t.bg_color}const c={reservation:e,rooms:u.perIdFilterBySelectedDepartments.value,users:b.perId.value,reservationTypes:Object.values(m.list.value),periodicityTypes:y.value,periodicity:e.periodicity,weekdays:s.list.value,day:e.date,startTime:o,endTime:l,dayStart:S.value,dayEnd:x.value,title:e.title,id:`roomreservation-${e.id}`,displayStyle:{background:r},onPeriodicityDelete:()=>{if(!e.periodicity)return Promise.resolve();const t=e.periodicity.periodicity.id,a=ye(e);return a?a.then((e=>be(t))):Promise.reject(`Could not remove the reservations with periodicity id ${t}`)}};return{slotData:c,component:(0,h.XI)(I.value?uo:fo),actions:{delete:ve,save:ce}}}function oe(e,t,a){const o=M(e.start_time),n=M(e.start_time+t.duration);let i="";if(l.departments){const e=l.departments.find((e=>`${e.id}`===a));e&&(i=e.abbrev)}const r={course:e,department:i,rooms:u.perIdFilterBySelectedDepartments.value,day:e.day,startTime:o,endTime:n,title:e.course.module.abbrev+"AAA",id:`scheduledcourse-${e.course.id}`,displayStyle:{background:P}};return{slotData:r,component:(0,h.XI)(I.value?Uo:Ro),actions:{save:void 0,delete:void 0}}}function ne(){const e=[];return e.push(...f.booleanList.value.map((e=>({component:(0,h.Xl)(pn),value:{id:e.id,name:e.name,value:!1}})))),e.push(...f.numericList.value.map((e=>{const t=k.numericList.value.filter((t=>t.attribute===e.id)).map((e=>e.value)),a=Math.min(...t),o=Math.max(...t);return{component:(0,h.Xl)(un),value:{id:e.id,name:e.name,min:a,max:o,initialMin:a,initialMax:o}}}))),e}function ie(e,t,a){e[t]||(e[t]=[]),e[t].push(a)}function re(e){const a=e.week,o=e.year;return ke(),t.value.fetch.roomReservations({week:a,year:o}).then((e=>{v.list.value=e,q.value=void 0,ge()}))}function se(e,a){const o=e.week,n=e.year;ke(),c.perDepartment.value={};let i=a.length;if(0===i)return void ge();const l={};a.forEach((e=>{t.value.fetch.scheduledCourses({week:o,year:n,department:e.abbrev}).then((t=>{l[e.id]=t,0===--i&&(c.perDepartment.value=l,ge())}))}))}function ue(){return t.value.fetch.reservationPeriodicities().then((e=>{p.list.value=e}))}function ce(e,t){const a=e.reservation,o=t.reservation;if(o.id<0)return v.list.value.push(a),q.value=void 0,void(a.periodicity!=o.periodicity&&(re(O.value),ue()));const n=v.list.value.findIndex((e=>e.id===o.id));n<0?console.error(`Could not find reservation with id: ${o.id}`):(a.periodicity!=o.periodicity&&(re(O.value),ue()),v.list.value[n]=a)}function de(e,t){console.error(`${e}: ${t}`)}function ve(e){const t=e.reservation;if(!(t.id<0))return t.periodicity&&t.periodicity.periodicity.id>=0?(E.value=t,void(R.value=!0)):void _e(t);q.value=void 0}function me(e){if(!e.periodicity||e.periodicity.periodicity.id<0)return;const a=e.periodicity.periodicity.id;t.value.fetch.roomReservations({periodicityId:a}).then((e=>{we(e).then((e=>{t.value.delete.reservationPeriodicity(a)})).finally(fe)}))}function pe(e){if(!e.periodicity||e.periodicity.periodicity.id<0)return;const a=e.periodicity.periodicity.id,o=new Date(e.date);ye(e)?.then((t=>{he(e)})).then((e=>{const n=new Date(o);n.setDate(n.getDate()-1);const i=p.perId.value[a].periodicity;if(""===i.periodicity_type)return;let l;switch(i.periodicity_type){case"BM":l=t.value.patch.reservationPeriodicityByMonth;break;case"EM":l=t.value.patch.reservationPeriodicityEachMonthSameDate;break;case"BW":l=t.value.patch.reservationPeriodicityByWeek;break}return l(i.id,{end:n.toISOString().split("T")[0]})}))?.then((e=>{re(O.value),ue()})).finally(fe)}function ye(e){if(!e.periodicity||e.periodicity.periodicity.id<0)return;const a=e.periodicity.periodicity.id,o=new Date(e.date),n=o.getTime();return t.value.fetch.roomReservations({periodicityId:a}).then((e=>(e=e.filter((e=>new Date(e.date).getTime()>n)),we(e))))}function be(e){return t.value.delete.reservationPeriodicity(e).then((e=>{ue()})).then((e=>re(O.value)))}function fe(){E.value=void 0,R.value=!1}function he(e){return t.value.delete.roomReservation(e.id).then((t=>{v.list.value=v.list.value.filter((t=>t.id!=e.id))}),(e=>T(e,de))).catch((e=>T(e,de)))}async function we(e){await Promise.all(e.map((async e=>await he(e))))}function _e(e){he(e),fe()}function ge(){--i<=0&&($.value=!1)}function ke(){++i,$.value=!0}function De(e){I.value=r.rooms.find((t=>t.id===e))}function Se(e){B.value=l.departments.find((t=>t.id===e))}(0,h.m0)((()=>{console.log("Updating Week days"),t.value.fetch.weekdays({week:O.value.week,year:O.value.year}).then((e=>{s.list.value=e}))})),(0,h.m0)((()=>{console.log("Updating Rooms reservations");const e=O.value;re(e)})),(0,h.m0)((()=>{console.log("Updating Scheduled courses");const e=O.value;l.departments&&se(e,l.departments)})),(0,h.m0)((()=>{console.log("Updating time settings"),te(D.value)}));let xe=-1;function Ce(e){if(e.startDate.getDate()!=e.endDate.getDate())return void console.error("Reserving a room for more than a day is not accepted.");const t=C(e.startDate.getDate()),a=C(e.startDate.getMonth()+1),o=e.startDate.getFullYear(),i=`${o}-${a}-${t}`;q.value={date:i,description:"",email:!1,end_time:e.endTime.text,id:xe--,periodicity:null,reservation_type:m.list.value[0].id,responsible:n,room:I.value?.id??-1,start_time:e.startTime.text,title:""}}function Te(e,t){const a=new Date,o=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;q.value={date:o,description:"",email:!1,end_time:new Date(a.getTime()+6e4*F).toTimeString(),id:xe--,periodicity:null,reservation_type:m.list.value[0].id,responsible:n,room:parseInt(t,10),start_time:a.toTimeString(),title:""}}function He(e,t){return`${C(e)}/${C(t)}`}function Me(e){const t=u.listFilterBySelectedDepartments.value.find((t=>t.id===e));return!(!t||!t.basic_rooms.find((t=>t.id===e)))}function Ue(e){return!(I.value&&!r.perId[e]?.basic_rooms.find((e=>e.id===I.value.id)))}function je(e){const t=Object.entries(c.perDepartment.value).find((t=>t[1].find((t=>t.id===e.id))));if(t){const e=t[0];return l.departments.find((t=>`${t.id}`===e))}}return(0,h.bv)((()=>{const e=document.getElementById("json_data");if(e&&e.textContent){const t=JSON.parse(e.textContent);"dept"in t&&(o=t.dept),"user_id"in t&&(n=t.user_id)}l.remote.fetch().then((e=>{if(e){B.value=e.find((e=>e.abbrev===o)),d.perDepartment.value={};const a={};let n=l.departments.length;e.forEach((e=>{t.value.fetch.courseTypes({department:e.abbrev}).then((t=>{a[e.id]=t,0===--n&&(d.perDepartment.value=a)}))}))}})),r.remote.fetch(),t.value.fetch.timeSettings().then((e=>{D.value=e})),t.value.fetch.roomReservationTypes().then((e=>{0===e.length&&(e=["Unknown"]),m.list.value=e})),ue(),t.value.fetch.reservationPeriodicityTypes().then((e=>{y.value=e})),t.value.fetch.users().then((e=>{b.list.value=e})),t.value.fetch.booleanRoomAttributes().then((e=>{f.booleanList.value=e})),t.value.fetch.numericRoomAttributes().then((e=>{f.numericList.value=e})),t.value.fetch.booleanRoomAttributeValues().then((e=>{k.booleanList.value=e})),t.value.fetch.numericRoomAttributeValues().then((e=>{k.numericList.value=e}))})),(e,t)=>((0,h.wg)(),(0,h.iD)("div",null,[$.value?((0,h.wg)(),(0,h.iD)("div",mi)):(0,h.kq)("",!0),(0,h.Wm)(Nn,{"is-open":R.value,reservation:E.value,"on-confirm-current":_e,"on-confirm-all":me,"on-confirm-future":pe,"on-cancel":fe},null,8,["is-open","reservation"]),(0,h._)("div",pi,[(0,h._)("div",yi,[(0,h._)("div",bi,[(0,h.Wm)(X,{week:O.value.week,"onUpdate:week":t[0]||(t[0]=e=>O.value.week=e),year:O.value.year,"onUpdate:year":t[1]||(t[1]=e=>O.value.year=e)},null,8,["week","year"]),(0,h._)("div",fi,[(0,h._)("div",hi,[(0,h._)("div",wi,[_i,I.value?((0,h.wg)(),(0,h.iD)("div",gi,[(0,h._)("button",{type:"button",class:"btn-close",onClick:t[2]||(t[2]=e=>De(-1))})])):(0,h.kq)("",!0),(0,h._)("div",ki,[(0,h.wy)((0,h._)("select",{id:"select-room","onUpdate:modelValue":t[3]||(t[3]=e=>I.value=e),class:"form-select w-auto","aria-label":"Select room"},[Di,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(Object.values(u.perIdFilterBySelectedDepartments.value).filter((e=>e.is_basic)).sort(((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))),(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e},(0,h.zw)(e.name),9,Si)))),128))],512),[[h.bM,I.value]])])]),(0,h._)("div",xi,[Ci,B.value?((0,h.wg)(),(0,h.iD)("div",Ti,[(0,h._)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=e=>Se(-1))})])):(0,h.kq)("",!0),(0,h._)("div",Hi,[(0,h.wy)((0,h._)("select",{id:"select-department","onUpdate:modelValue":t[5]||(t[5]=e=>B.value=e),class:"form-select w-auto ms-1","aria-label":"Select department"},[Mi,((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(l).departments,(e=>((0,h.wg)(),(0,h.iD)("option",{key:e.id,value:e},(0,h.zw)(e.abbrev),9,Ui)))),128))],512),[[h.bM,B.value]])])]),I.value?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("div",ji,[(0,h._)("div",Fi,[(0,h.Wm)(Dn,{"input-id":"filter-input-roomName",label:"Filter by room name:",text:z.value,"onUpdate:text":t[6]||(t[6]=e=>z.value=e)},null,8,["text"])]),(0,h._)("div",Pi,[(0,h.Wm)(No,(0,h.dG)({id:"filter-select-attribute",label:"Filter by attributes:",values:ne()},{"selected-values":A.value,"onUpdate:selected-values":t[7]||(t[7]=e=>A.value=e)}),null,16,["selected-values"])])]))])])]),(0,h._)("div",Oi,[(0,h._)("div",$i,[(0,h._)("div",Ei,[(0,h._)("div",null,[(0,h._)("span",{style:(0,h.j5)({color:P})},"■ ",4),(0,h.Uk)("Course")])]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(m.list.value,(e=>((0,h.wg)(),(0,h.iD)("div",{key:e.id,class:"col-auto"},[(0,h._)("div",null,[(0,h._)("span",{style:(0,h.j5)({color:e.bg_color})},"■ ",4),(0,h.Uk)((0,h.zw)(e.name),1)])])))),128))]),I.value?((0,h.wg)(),(0,h.j4)(Z,{key:0,onDrag:Ce,values:(0,h.SU)(G)},null,8,["values"])):((0,h.wg)(),(0,h.j4)(le,{key:1,onNewSlot:Te,values:(0,h.SU)(Q),onRowHeaderClick:De},null,8,["values"]))])])])]))}});const Bi=(0,Qa.Z)(Ii,[["__scopeId","data-v-7065c654"]]);var Wi=Bi;const Ai=(0,h.ri)(Wi).use((0,qn.WB)()),Yi=new Date,Li=new Date(Yi.getFullYear(),0,1),Zi=Math.floor((Yi.getTime()-Li.getTime())/864e5),zi=Math.ceil(Zi/7),Vi=(0,h.iH)({week:zi,year:Yi.getFullYear()}),Ni=[{appName:"roomreservation",app:Ai}],qi=(0,qn.WB)();Ni.forEach((({appName:e,app:t})=>{t.provide(_,(0,h.OT)(b)),t.provide(w,(0,h.OT)(Vi.value)),t.use(qi),t.component("PopperComponent",k.Z),t.mount(`#${e}-app`)}))}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,i){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],i=e[c][2];for(var r=!0,s=0;s<o.length;s++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](o[s])}))?o.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,n,i]}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,l=o[0],r=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(s)var c=s(a)}for(t&&t(o);u<l.length;u++)i=l[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},o=self["webpackChunkflopedt_front"]=self["webpackChunkflopedt_front"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(5940)}));o=a.O(o)})();
//# sourceMappingURL=app.js.map